@model IEnumerable<Web_ASM_Nhom6.Models.Product>

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success row m-auto mb-2" role="alert">
        <h5 class="col-md-9">@TempData["SuccessMessage"]</h5>
        <a href="~/Product/AdminProduct" class="btn btn-danger col-md-3">Đóng</a>
    </div>
}

<div class="col-md-12 row container-fluid m-auto">
    <div class="col-md-3">
        <img class="p-1 m-auto" src="~/image//Product/0120fa5d-9ce5-43d2-a3e4-f9b7b838a553.jpeg" alt="Alternate Text" width="300px" />
    </div>
    <div class="col-md-9">
        <h1 class="font-weight-bold">Supper</h1>
        <p class="text-primary fs-5">Địa chỉ >> <span>aaa</span> </p>
        <div class="ratings mt-1 mb-1">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-star-fill text-warning" viewBox="0 0 16 16">
                <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-star-fill text-warning" viewBox="0 0 16 16">
                <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-star-fill text-warning" viewBox="0 0 16 16">
                <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-star-fill text-warning" viewBox="0 0 16 16">
                <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-star-fill text-warning" viewBox="0 0 16 16">
                <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
            </svg>
            <span class="m-3"> 898 Đánh giá</span>
        </div>
        <p class="text-success">Thời gian hoạt động : 8:30 - 21:30 </p>
        <hr / class="border-3 bg-dark">
        <a href="@Url.Action("Add")" class="btn btn-primary"> + Thêm sản phẩm mới</a>
    </div>
</div>

<div class="container-fluid col-md-12">

</div>

<div class="container-fluid col-md-12 row">
    <div class="col-md-3">
        <form method="get" action="@Url.Action("AdminProduct", "Product")" onsubmit="saveFormValues(event)">
            <div class="col-md-12 mt-3 p-3 bg-body-secondary">
                <input class="col-md-12 mt-3" type="text" id="search" name="search" placeholder="Tìm kiếm sản phẩm" />
                <button class="btn btn-secondary col-md-12 mt-3" onclick="search()">Tìm kiếm</button>
            </div>
            <div class="col-md-12 mt-3 p-3 bg-body-secondary">
                <input class="col-md-5" type="number" id="minPrice" name="minPrice" placeholder="Thấp" step="1" value="" />
                <label for="maxPrice">Đến</label>
                <input class="col-md-5" type="number" id="maxPrice" name="maxPrice" placeholder="Cao" step="1" value="" />
                <button class="btn btn-secondary col-md-12 mt-3" type="submit">Tìm</button>
                <button class="btn btn-secondary col-md-12 mt-3" onclick="resetPrice()">Reset Giá</button>
            </div>
        </form>
    </div>
    <div class="col-md-9 row">
        <div class="col-12 mt-3">
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead class="table-dark">
                        <tr>
                            <th>Product ID</th>
                            <th>Menu ID</th>
                            <th>Name</th>
                            <th>Description</th>
                            <th>Image</th>
                            <th>Price</th>
                            <th>Is Delete</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>@Html.DisplayFor(modelItem => item.ProductId)</td>
                                <td>@Html.DisplayFor(modelItem => item.MenuId)</td>
                                <td>@Html.DisplayFor(modelItem => item.Name)</td>
                                <td>@Html.DisplayFor(modelItem => item.Description)</td>
                                <td><img src="@Html.DisplayFor(modelItem => item.Image)" alt="Alternate Text" width="100px"/></td>
                                <td>@Html.DisplayFor(modelItem => item.Price)0 đ</td>
                                <td>@Html.DisplayFor(modelItem => item.IsDelete)</td>
                                <td>
                                    <div class="btn-group" role="group">
                                        <a href="@Url.Action("Edit", new { id = item.ProductId })" class="btn btn-primary btn-sm">Edit</a>
                                    </div>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script>
    // Function to save input values in local storage
    function saveFormValues(event) {
        event.preventDefault();

        var minPriceInput = document.getElementById("minPrice");
        var maxPriceInput = document.getElementById("maxPrice");

        localStorage.setItem("minPriceValue", minPriceInput.value);
        localStorage.setItem("maxPriceValue", maxPriceInput.value);

        event.target.submit();
    }

    // Function to retrieve and set input values from local storage
    function setFormValues() {
        var minPriceInput = document.getElementById("minPrice");
        var maxPriceInput = document.getElementById("maxPrice");

        var minPriceValue = localStorage.getItem("minPriceValue");
        var maxPriceValue = localStorage.getItem("maxPriceValue");

        minPriceInput.value = minPriceValue;
        maxPriceInput.value = maxPriceValue;
    }

    // Function to reset price inputs to null
    function resetPrice() {
        var minPriceInput = document.getElementById("minPrice");
        var maxPriceInput = document.getElementById("maxPrice");

        minPriceInput.value = null;
        maxPriceInput.value = null;

        localStorage.removeItem("minPriceValue");
        localStorage.removeItem("maxPriceValue");
    }

    // Function to perform search
    function search() {
        var minPriceInput = document.getElementById("minPrice").value;
        var maxPriceInput = document.getElementById("maxPrice").value;
        var searchTermInput = document.getElementById("searchTerm").value;

        // Perform the search based on the input values
        // Replace the code below with your search logic

        var searchUrl = "@Url.Action("Search", "Product")";
        searchUrl += "?minPrice=" + minPriceInput + "&maxPrice=" + maxPriceInput + "&search=" + searchTermInput;

        // Redirect to the search URL
        window.location.href = searchUrl;
    }

    setFormValues();
</script>